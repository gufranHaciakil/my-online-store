<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/all.min.css" />
    <script defer src="/main.js"></script>
    <title>Online Store</title>
    <!--  -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      rel="stylesheet"
      href="/css/mobileScreen.css"
      media="(max-width:500px)"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@200;300;400;500;600;700;800;900;1000&display=swap"
      rel="stylesheet"
    />
  </head>
  <body id="body">
    <div id="sepetIcon"><i class="fa-solid fa-cart-arrow-down"></i></div>
    <h1 class="h1">Üst giyim Hoodie</h1>
    <section class="section1">
      <div class="Parent-cards">
        <div class="cards">
          <div class="img-title">
            <img src="/img/hamri hodi.png" alt="" />
            <p id="pTitle" class="AllProductP">Hamri pamuklu Hoodie</p>
            <button class="buttunClass">sepete ekle</button> <span>10TL</span>
          </div>
        </div>
        <div class="cards">
          <div class="img-title">
            <img src="/img/mavi hodi.png" alt="" />
            <p id="pTitle" class="AllProductP">Mavi pamuklu Hoodie</p>
            <button class="buttunClass">sepete ekle</button> <span>15TL</span>
          </div>
        </div>
        <div class="cards">
          <div class="img-title">
            <img src="/img/pempe hodi.png" alt="" />
            <p id="pTitle" class="AllProductP">Pembe pamuklu Hoodie</p>
            <button class="buttunClass">sepete ekle</button> <span>20TL</span>
          </div>
        </div>
        <div class="cards">
          <div class="img-title">
            <img src="/img/sari hodi.png" alt="" />
            <p id="pTitle" class="AllProductP">sari pamuklu Hoodie</p>
            <button class="buttunClass">sepete ekle</button> <span>33TL</span>
          </div>
        </div>
      </div>
    </section>

    <section class="section2">
      <h1>Üst giyim Tişört</h1>
      <div class="Parent-cards">
        <div class="cards">
          <div class="img-title">
            <img src="/img/kirmizi tisort.png" alt="" />
            <p class="AllProductP">Kırmızı pamuklu Tişört</p>
            <button class="buttunClass">sepete ekle</button> <span>10TL</span>
          </div>
        </div>
        <div class="cards">
          <div class="img-title">
            <img src="/img/mor tisort.png" alt="" />
            <p class="AllProductP">Mor pamuklu Tişört</p>
            <button class="buttunClass">sepete ekle</button> <span>15TL</span>
          </div>
        </div>
        <div class="cards">
          <div class="img-title">
            <img src="/img/siyah tisort.png" alt="" />
            <p class="AllProductP">Siyah pamuklu Tişört</p>
            <button class="buttunClass">sepete ekle</button> <span>20TL</span>
          </div>
        </div>
        <div class="cards">
          <div class="img-title">
            <img src="/img/gri tisort.png" alt="" />
            <p class="AllProductP">Gri pamuklu Tişört</p>
            <button class="buttunClass">sepete ekle</button> <span>33TL</span>
          </div>
        </div>
      </div>
    </section>

    <section id="sepetSayfasi" class="">
      <div class="close-title">
        <div id="closeIcon"><i class="fa-solid fa-xmark"></i></div>
        <p class="AllProductP">
          Seppetin <i class="fa-solid fa-arrow-down"></i>
        </p>
      </div>
      <div id="product">
        <div class="img-title2">
          <div class="conttt">
            <img src="./img/hamri hodi.png" alt="" />
            <div class="proNameTitle">
              <p class="sepetProductName">
                ${itemTitle}jj jjj jj nu uhh ioijio ijoijio i9jj
              </p>
              <div class="kargoGunu">2 gün içinde kargoda</div>
            </div>
          </div>
          <div class="others-item">
            <input type="number" class="input" value="1" />
            <span class="fiat">${itemFiat}</span>
            <div class="trashIcon" id="trashIconId">
              <i class="fa-solid fa-trash" id="trashICON"></i>
            </div>
          </div>
        </div>
      </div>
      <div class="siparisOzeti">
        <h1>Spariş Özeti</h1>
        <div>ürün toplamı</div>
        <span id="kargosiz">00</span>
        <div>kargo fiatı toplamı</div>
        <span>19.99</span>
        <hr />
        <div id="toplam">0TL</div>
      </div>
    </section>
  </body>

  <script>
    const buttunClass = document.querySelectorAll(".buttunClass");
    const basariylaEklendi = document.getElementById("basariylaEklendi");
    const sepetSayfasi = document.getElementById("sepetSayfasi");
    const product = document.getElementById("product");

    const closeIconFunk = () => {
      const closeIcon = document.getElementById("closeIcon");
      closeIcon.addEventListener("click", (eo) => {
        sepetSayfasi.style.right = "-70rem";
        mobleScrSepSayfa.style.left = "400px";
      });
    };
    closeIconFunk();

    const updatePrise = () => {
      const allProductInseppet = document.querySelectorAll(".img-title2");
      let sonuc2 = 0;
      let sonuc = 0;
      let kargo = 20;
      allProductInseppet.forEach((item) => {
        const productFiati = Number(
          item.getElementsByClassName("fiat")[0].innerText.replace("TL", "")
        );
        const productValue = Number(
          item.getElementsByClassName("input")[0].value
        );
        sonuc = sonuc + kargo + productFiati * productValue;
        sonuc2 = sonuc2 + productFiati * productValue;
        kargo = 0;
      });

      const toplam = document.getElementById("toplam");
      toplam.innerText = `${sonuc} TL`;

      const kargosiz = document.getElementById("kargosiz");
      kargosiz.innerText = `${sonuc2} TL`;
    };

    const body = document.getElementById("body");
    buttunClass.forEach((item) => {
      item.addEventListener("click", (eo) => {
        {
          // from buy to donemobScrSeptIcon
          item.classList.add("buttunAktive");
          item.setAttribute("disabled", "");
          item.innerHTML = `Sepette Eklendi  &#10004;`;
        }

        {
          // creat Basarili Element
          const basariylaEklendi = document.createElement("div");
          body.prepend(basariylaEklendi);
          basariylaEklendi.innerHTML = "Başarıyla Eklendi &#10004;";
          basariylaEklendi.classList.add("basariylaEklendi");
          setTimeout(() => {
            basariylaEklendi.remove();
          }, 2000);
        }

        let itemTitle =
          item.parentElement.getElementsByTagName("p")[0].innerText;
        let itemImg = item.parentElement.getElementsByTagName("img")[0].src;
        let itemFiat =
          item.parentElement.getElementsByTagName("span")[0].innerText;

        {
          // Products InnerHtml
          product.innerHTML += `
<div class="img-title2">
  <div class="conttt">
      <img src="${itemImg}" alt="" />
      <div class="proNameTitle">
        <p class="sepetProductName">${itemTitle}</p>
        <div class="kargoGunu">2 gün içinde kargoda</div>
      </div>
  </div>
  <div class="others-item">
        <input type="number" class="input" value="1" />
        <span class="fiat">${itemFiat}</span>
        <div class="trashIcon" id="trashIconId"><i class="fa-solid fa-trash" id="trashICON"></i></div>
  </div>
</div>`;
        }

        updatePrise();
        closeIconFunk();
      });
    });

    const sepetIcon = document.getElementById("sepetIcon");
    sepetIcon.addEventListener("click", (eo) => {
      sepetSayfasi.style.right = "-1rem";
    });
    sepetSayfasi.addEventListener("click", (eo) => {
      if (eo.target.classList.contains("fa-trash")) {
        const removeProduct =
          eo.target.parentElement.parentElement.parentElement;
        removeProduct.style.opacity = "0";
        const sepetteProName =
          eo.target.parentElement.parentElement.parentElement.getElementsByClassName(
            "sepetProductName"
          )[0].innerText;
        setTimeout(() => {
          removeProduct.remove();
          updatePrise();
        }, 300);
        const allProCards = document.querySelectorAll(".cards");
        allProCards.forEach((item) => {
          const allCardsProName =
            item.getElementsByClassName("AllProductP")[0].innerText;
          if (allCardsProName == sepetteProName) {
            const sepetBTN = item.getElementsByClassName("buttunClass")[0];
            sepetBTN.removeAttribute("disabled");
            sepetBTN.classList.remove("buttunAktive");
            sepetBTN.innerText = "sepete ekle";
          }
        });
      }
    });
    sepetSayfasi.addEventListener("change", (eo) => {
      updatePrise();
    });
  </script>
</html>
